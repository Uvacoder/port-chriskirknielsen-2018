function $(t,e){return"#"!==t.charAt(0)||t.match(/\.|\[|\(|\:/)?(e||document).querySelector(t):document.getElementById(t.slice(1))}function setHash(t){history.replaceState?history.replaceState(t,null,t):location.hash=t}function Ticker(){var i={};function e(){for(var t in i)i[t].enabled&&!1===i[t].callback()&&delete i[t];requestAnimationFrame(e)}function n(t){console.log('Error: the given id "'+t+'" does not refer to any callback')}this.start=function(){e()},this.hook=function(t,e){i[t]={callback:e,enabled:!0}},this.unhook=function(t){t in i?delete i[t]:n(t)},this.enable=function(t){t in i?i[t].enabled=!0:n(t)},this.disable=function(t){t in i?i[t].enabled=!1:n(t)}}function MenuHandler(t,o,e){function a(t){t.hasAttribute("aria-current")||($('[aria-current="true"]').removeAttribute("aria-current"),t.parentElement.setAttribute("aria-current","true"))}function i(t,e){var i=e.getAttribute("href");a(e),t.preventDefault(),t.stopPropagation(),setHash(i),$(i).scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"}),document.activeElement.blur()}this.getActiveMenuId=function(){return $('[aria-current="true"] > a').getAttribute("href").split("#")[1]};for(var n=0;n<o.length;n++)o[n].addEventListener("click",function(t){i(t,t.currentTarget)},!1);e.addEventListener("click",function(t){i(t,o[0])},!1),t.hook("updateActiveMenu",function(){for(var t,e=document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight,i=Math.round(e/3),n=0;n<o.length;n++){var s=$("#"+o[n].getAttribute("href").split("#")[1]).getBoundingClientRect();if(parseInt(s.top,10),i<=parseInt(s.bottom,10)){t=o[n];break}}a(t)})}function ProjectModal(s){var t=!1,o=s.length;this.current=0,this.dragging=!1,this.swipeX=0,this.offsetX=0,this.isOpened=function(){return t},this.open=function(){this.wrapper=document.createElement("div"),this.content=document.createElement("div"),this.media=document.createElement("div"),this.info=document.createElement("div"),this.buttons={container:document.createElement("div"),previous:document.createElement("button"),next:document.createElement("button"),close:document.createElement("button")},this.logo=document.createElement("div"),this.name=document.createElement("div"),this.details={container:document.createElement("div"),type:document.createElement("div"),tools:document.createElement("div")},this.description=document.createElement("div"),this.wrapper.setAttribute("class","modal__wrapper"),this.wrapper.setAttribute("data-projects",o),this.content.setAttribute("class","modal__content"),this.content.setAttribute("tabindex","0"),this.media.setAttribute("class","modal__media"),this.info.setAttribute("class","modal__info"),this.buttons.container.setAttribute("class","modal__buttons"),this.buttons.previous.setAttribute("class","modal__button modal__button-prev"),this.buttons.previous.setAttribute("title",lang.txtPrev),this.buttons.previous.innerHTML="<span>&larr;</span>",this.buttons.close.setAttribute("class","modal__button modal__button-close"),this.buttons.close.setAttribute("title",lang.txtClose),this.buttons.close.innerHTML="<span>&times;</span>",this.buttons.next.setAttribute("class","modal__button modal__button-next"),this.buttons.next.setAttribute("title",lang.txtNext),this.buttons.next.innerHTML="<span>&rarr;</span>",this.logo.setAttribute("class","modal__logo"),this.name.setAttribute("class","modal__name font--title text--center"),this.details.container.setAttribute("class","modal__details"),this.details.type.setAttribute("class","modal__details-type color--a-m"),this.details.tools.setAttribute("class","modal__details-tools"),this.description.setAttribute("class","modal__description"),document.body.appendChild(this.wrapper),this.wrapper.appendChild(this.content),this.content.appendChild(this.media),this.content.appendChild(this.info),this.info.appendChild(this.buttons.container),this.buttons.container.appendChild(this.buttons.previous),this.buttons.container.appendChild(this.buttons.close),this.buttons.container.appendChild(this.buttons.next),this.info.appendChild(this.logo),this.info.appendChild(this.name),this.info.appendChild(this.details.container),this.details.container.appendChild(this.details.type),this.details.container.appendChild(this.details.tools),this.info.appendChild(this.description),setTimeout(function(){this.content.classList.add("modal__content--loaded")}.bind(this),350),this.wrapper.addEventListener("click",function(t){t.target===this.wrapper&&this.close()}.bind(this),!1),this.buttons.previous.addEventListener("click",this.previous.bind(this),!1),this.buttons.close.addEventListener("click",this.close.bind(this),!1),this.buttons.next.addEventListener("click",this.next.bind(this),!1),this.wrapper.addEventListener("mousedown",function(t){this.onDown(t,"mouse")}.bind(this),!1),this.wrapper.addEventListener("touchstart",function(t){this.onDown(t,"touch")}.bind(this),!1),this.wrapper.addEventListener("mousemove",function(t){this.onMove(t,"mouse")}.bind(this),!1),this.wrapper.addEventListener("touchmove",function(t){this.onMove(t,"touch")}.bind(this),!1),this.wrapper.addEventListener("mouseup",function(t){this.onUp(t,"mouse")}.bind(this),!1),this.wrapper.addEventListener("touchend",function(t){this.onUp(t,"touch")}.bind(this),!1),t=!0,document.activeElement.blur(),this.content.focus()},this.load=function(t){this.isOpened()||this.open();var e=0;"-"!==t&&"+"!==t||(e=350,"-"===t?(this.content.classList.add("modal__content--previous"),this.content.classList.add("modal__content--switch"),t=0===this.current?o-1:this.current-1):"+"===t&&(this.content.classList.add("modal__content--next"),this.content.classList.add("modal__content--switch"),t=this.current===o-1?0:this.current+1),setTimeout(function(){this.content.classList.remove("modal__content--previous"),this.content.classList.remove("modal__content--next"),this.content.classList.remove("modal__content--switch")}.bind(this),e)),this.media.classList.remove("loader"),this.current=parseInt(t,10),this.info.scrollTop=0;var i=s[this.current],n="";n=i.youtube?(this.media.classList.add("loader"),'<iframe src="//www.youtube.com/embed/'+i.youtube+'" allowfullscreen="" style="z-index: 200;" height="100%" frameborder="0" width="100%"></iframe>'):i.embed?(this.media.classList.add("loader"),i.embed):i.slideshow?'<div class="slideshow">'+i.slideshow.map(function(t,e){return'<input type="radio" name="slideshow" id="slideshow_item_'+e+'" class="slideshow__radio visually-hidden" value="'+e+'" '+(0===e?" checked":"")+'><label for="slideshow_item_'+e+'" class="slideshow__label"><div class="slideshow__label-thumbnail" style="background-image: url('+t.tb+')" role="img" aria-label="Thumbnail for image '+(e+1)+" out of "+i.slideshow.length+'"></div></label>'}).join(" ")+'<div class="slideshow__container loader">'+i.slideshow.map(function(t,e){return'<div class="slideshow__container-image" style="background-image: url('+t.o+')" role="img" aria-label="Full-sized image '+(e+1)+" out of "+i.slideshow.length+'"></div>'}).join("")+"</div></div>":'<div class="modal__image loader"><img src="'+i.image+'" alt="'+i.name+' image" class="modal__image-img"></div>',setTimeout(function(){this.wrapper.setAttribute("data-current-project",this.current+1),this.media.innerHTML=n,this.logo.innerHTML='<img src="'+i.logo+'" alt="Project logo" class="modal__logo-image">',this.name.innerText=i.name,this.details.type.innerText=i.type.join(" / "),this.details.tools.innerHTML=i.tools.map(function(t){return'<span class="tool-icon tool-icon__'+t.toLowerCase().replace(/\s+/g,"")+'" data-tip="'+t+'" data-tip-nowrap="true" data-tip-reverse="true" data-tip-position="left" aria-label="'+t+'" role="img">'+t+"</span>"}).join(" "),this.description.innerHTML=i.description}.bind(this),e)},this.previous=function(){this.load("-")},this.next=function(){this.load("+")},this.close=function(){document.body.removeChild(projectModal.wrapper),t=!1},this.onDown=function(t,e){var i=!1;this.dragging=!0,this.swipeX="touch"===e?t.touches[0].pageX:t.pageX,"mouse"===e?(t.preventDefault(),i=this.buttons.container):"touch"===e&&(i=this.info),i&&(t.target===i||i.contains(t.target)?this.dragging=!1:this.wrapper.classList.add("modal--dragging"))},this.onMove=function(t,e){if(this.dragging){var i=window.innerWidth||document.documentElement.clientWidth,n="touch"===e?t.touches[0].pageX:t.pageX;this.offsetX=(n-this.swipeX)/i*100,this.content.style.transform="translateX("+this.offsetX+"vw)",this.content.style.transition="transform 0s linear",this.media.style.opacity=1-Math.abs(this.offsetX/100),this.media.style.transition="opacity 0s linear",this.info.style.opacity=1-Math.abs(this.offsetX/100),this.info.style.transition="opacity 0s linear"}},this.onUp=function(t,e){25<this.offsetX?this.previous():this.offsetX<-25&&this.next(),this.content.style.removeProperty("transform"),this.content.style.removeProperty("transition"),this.media.style.removeProperty("opacity"),this.media.style.removeProperty("transition"),this.info.style.removeProperty("opacity"),this.info.style.removeProperty("transition"),this.wrapper.classList.remove("modal--dragging"),this.dragging=!1,this.offsetX=0,this.swipeX=0}}window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,Math.round(1e3/60))};var ticker=new Ticker,projectModal=new ProjectModal(projects);document.addEventListener("DOMContentLoaded",function(t){var e,i,n=new MenuHandler(ticker,document.querySelectorAll(".js-menuLink"),$("#menu-logo"));ticker.hook("portfolioVideo",function(){var t=$("#portfolio-video");t&&("portfolio"===n.getActiveMenuId()||t.paused?"portfolio"===n.getActiveMenuId()&&t.paused&&t.play():t.pause())}),function(){for(var t=$("#projects-list"),e=t.children,s="data-project-id",i=0;i<e.length;i++){var n=e[i],o=document.createElement("button");Array.prototype.slice.call(n.attributes).forEach(function(t){"href"!==t.name&&o.setAttribute(t.name,t.value)}),o.setAttribute("type","button"),o.innerHTML=n.innerHTML,t.replaceChild(o,n)}window.addEventListener("click",function(t){var e=t.target.closest("["+s+"]");if(e){var i=e.getAttribute(s),n=parseInt(i,10);projectModal.load(n)}},!1)}(),e=$("#about-image"),(i=new Image).src=e.getAttribute("data-lazy-src"),i.onload=function(){e.setAttribute("src",e.getAttribute("data-lazy-src")),e.removeAttribute("data-lazy-src")},document.addEventListener("keyup",function(t){if(t=t||window.event,projectModal.isOpened())if(27==t.keyCode||"Esc"==t.key||"Escape"==t.key){if(projectModal.dragging)return void projectModal.onUp(!1,"mouse");projectModal.close()}else 37==t.keyCode||"Left"==t.key||"ArrowLeft"==t.key?projectModal.previous():39!=t.keyCode&&"Right"!=t.key&&"ArrowRight"!=t.key||projectModal.next()},!1),ticker.start()},!1),function(){for(var t=window.innerWidth,e=document.querySelectorAll("[data-video-responsive]"),i=function(t,e,i){var n=t.getAttribute("class"),s=t.getAttribute("id");t.outerHTML='<video poster="'+i+'" muted autoplay loop playsinline class="'+n+'" id="'+s+'" tabindex="-1">    <source src="'+e+'.webm" type="video/webm">    <source src="'+e+'.mp4" type="video/mp4"></video>'},n=0;n<e.length;n++){var s=e[n].getAttribute("src"),o=e[n].getAttribute("data-video-poster"),a=e[n].getAttribute("data-video-srcset").split(",").map(function(t){return t.trim()});t<520||(t<=1440?i(e[n],a[0],s):i(e[n],a[1],o))}}();